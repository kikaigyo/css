(function(L,M){function u(Q){for(var R=0;R<l.bundles.length;R++){for(var P in l.bundles[R]){if(P!=Q&&C(l.bundles[R][P],Q)>-1){return P}}}}function s(){L.using=r,L.provide=t,L.define=v,L.loadrunner=w;return q}function p(S){var T,U;for(var V=0,P;P=l.matchers[V];V++){var Q=P[0],R=P[1];if(T=S.match(Q)){return R(S)}}throw new Error(S+" was not recognised by loader")}function n(S,T){var P=[];for(var Q=0,R;R=S[Q];Q++){typeof R=="string"&&(R=p(R)),B(R)&&(R=new J(n(R,T),T)),P.push(R)}return P}function l(){var R=A(arguments),S,P;typeof R[R.length-1]=="function"&&(S=R.pop()),typeof R[R.length-1]=="boolean"&&(P=R.pop());var Q=new I(n(R,P),P);S&&Q.then(S);return Q}function j(){var R=A(arguments),S=[],P,Q;typeof R[0]=="string"&&(P=R.shift()),B(R[0])&&(S=R.shift()),Q=R.shift();return a(P,function(U){function V(){var ac=g(A(S),Z),ab;typeof Q=="function"?ab=Q.apply(Z,ac):ab=Q,typeof ab=="undefined"&&(ab=Z.exports),U(ab)}var Z=this,T=[];for(var W=0,X=S.length;W<X;W++){var Y=S[W];C(["require","exports"],Y)==-1&&T.push(e(Y,Z))}T.length>0?l.apply(this,T.concat(V)):V()})}function g(T,U){function Q(V){return H.exports[e(V,U)]}var P=[];for(var R=0,S=T.length;R<S;R++){if(T[R]=="require"){P.push(Q);continue}if(T[R]=="exports"){U.exports=U.exports||{},P.push(U.exports);continue}P.push(Q(T[R]))}return P}function e(S,T){var P=T.id||"",Q=P.split("/");Q.pop();var R=Q.join("/");return S.replace(/^\./,R)}function c(){var Q=A(arguments),R,P;typeof Q[0]=="string"&&(R=Q.shift()),P=Q.shift();return a(R,P)}function a(Q,R){var P;!Q&&N&&(P=m||K()),P?(delete o[P.scriptId],P.body=R,P.execute()):(k=P=new H(Q,R),h[P.id]=P);return P}function K(){for(var P in O){if(O[P].readyState=="interactive"){return o[O[P].id]}}}function J(P,Q){this.deps=P,this.collectResults=Q}function I(P,Q){this.deps=P,this.collectResults=Q,this.deps.length==0&&this.complete()}function H(P,Q){this.id=P,this.body=Q,typeof Q=="undefined"&&(this.path=this.resolvePath(P))}function G(P,Q){this.id=this.path=P,this.force=!!Q}function F(){}function E(T,U,P){var Q=U.split("/"),R=T;while(Q.length>1){var S=Q.shift();R=R[S]=R[S]||{}}R[Q[0]]=P}function D(){var R=A(arguments),S=[];for(var P=0,Q=R.length;P<Q;P++){R[P].length>0&&S.push(R[P].replace(/\/$/,""))}return S.join("/")}function C(R,S){for(var P=0,Q;Q=R[P];P++){if(S==Q){return P}}return -1}function A(P){return Array.prototype.slice.call(P)}function z(R){for(var S=1,P;P=arguments[S];S++){for(var Q in P){R[Q]=P[Q]}}return R}var N=L.attachEvent&&!L.opera,O=M.getElementsByTagName("script"),aa=0,b,d=M.createElement("script"),f={},h={},k,m,o={},r=L.using,t=L.provide,v=L.define,w=L.loadrunner;for(var x=0,y;y=O[x];x++){if(y.src.match(/loadrunner\.js(\?|#|$)/)){b=y;break}}var B=Array.isArray||function(P){return P.constructor==Array};F.prototype.then=function(P){var Q=this;this.started||(this.started=!0,this.start()),this.completed?P.apply(L,this.results):(this.callbacks=this.callbacks||[],this.callbacks.push(P));return this},F.prototype.start=function(){},F.prototype.complete=function(){if(!this.completed){this.results=A(arguments),this.completed=!0;if(this.callbacks){for(var P=0,Q;Q=this.callbacks[P];P++){Q.apply(L,this.results)}}}},G.loaded=[],G.prototype=new F,G.prototype.start=function(){var R=this,S,P,Q;if(Q=h[this.id]){Q.then(function(){R.complete()});return this}(S=f[this.id])?S.then(function(){R.loaded()}):!this.force&&C(G.loaded,this.id)>-1?this.loaded():(P=u(this.id))?l(P,function(){R.loaded()}):this.load();return this},G.prototype.load=function(){var P=this;f[this.id]=P;var Q=d.cloneNode(!1);this.scriptId=Q.id="LR"+ ++aa,Q.type="text/javascript",Q.async=!0,Q.onerror=function(){throw new Error(P.path+" not loaded")},Q.onreadystatechange=Q.onload=function(R){R=L.event||R;if(R.type=="load"||C(["loaded","complete"],this.readyState)>-1){this.onreadystatechange=null,P.loaded()}},Q.src=this.path,m=this,O[0].parentNode.insertBefore(Q,O[0]),m=null,o[Q.id]=this},G.prototype.loaded=function(){this.complete()},G.prototype.complete=function(){C(G.loaded,this.id)==-1&&G.loaded.push(this.id),delete f[this.id],F.prototype.complete.apply(this,arguments)},H.exports={},H.prototype=new G,H.prototype.resolvePath=function(P){return D(l.path,P+".js")},H.prototype.start=function(){var R,S,P=this,Q;this.body?this.execute():(R=H.exports[this.id])?this.exp(R):(S=h[this.id])?S.then(function(T){P.exp(T)}):(bundle=u(this.id))?l(bundle,function(){P.start()}):(h[this.id]=this,this.load())},H.prototype.loaded=function(){var Q,R,P=this;N?(R=H.exports[this.id])?this.exp(R):(Q=h[this.id])&&Q.then(function(S){P.exp(S)}):(Q=k,k=null,Q.id=Q.id||this.id,Q.then(function(S){P.exp(S)}))},H.prototype.complete=function(){delete h[this.id],G.prototype.complete.apply(this,arguments)},H.prototype.execute=function(){var P=this;typeof this.body=="object"?this.exp(this.body):typeof this.body=="function"&&this.body.apply(window,[function(Q){P.exp(Q)}])},H.prototype.exp=function(P){this.complete(this.exports=H.exports[this.id]=P||{})},I.prototype=new F,I.prototype.start=function(){function S(){var T=[];R.collectResults&&(T[0]={});for(var U=0,V;V=R.deps[U];U++){if(!V.completed){return}V.results.length>0&&(R.collectResults?V instanceof J?z(T[0],V.results[0]):E(T[0],V.id,V.results[0]):T=T.concat(V.results))}R.complete.apply(R,T)}var R=this;for(var P=0,Q;Q=this.deps[P];P++){Q.then(S)}return this},J.prototype=new F,J.prototype.start=function(){var R=this,S=0,P=[];R.collectResults&&(P[0]={}),function Q(){var T=R.deps[S++];T?T.then(function(U){T.results.length>0&&(R.collectResults?T instanceof J?z(P[0],T.results[0]):E(P[0],T.id,T.results[0]):P.push(T.results[0])),Q()}):R.complete.apply(R,P)}();return this},j.amd={};var q=function(P){return P(l,c,q,define)};q.Script=G,q.Module=H,q.Collection=I,q.Sequence=J,q.Dependency=F,q.noConflict=s,L.loadrunner=q,L.using=l,L.provide=c,L.define=j,l.path="",l.matchers=[],l.matchers.add=function(P,Q){this.unshift([P,Q])},l.matchers.add(/(^script!|\.js$)/,function(P){var Q=new G(P.replace(/^\$/,l.path.replace(/\/$/,"")+"/").replace(/^script!/,""),!1);Q.id=P;return Q}),l.matchers.add(/^[a-zA-Z0-9_\-\/]+$/,function(P){return new H(P)}),l.bundles=[],b&&(l.path=b.getAttribute("data-path")||b.src.split(/loadrunner\.js/)[0]||"",(main=b.getAttribute("data-main"))&&l.apply(L,main.split(/\s*,\s*/)).then(function(){}))})(this,document);window.__twttrlr=loadrunner.noConflict();__twttrlr(function(h,e,f,g){e("util/iframe",function(a){var b=document.createElement("div");a(function(m){b.innerHTML='<iframe src="'+m.url+'" allowtransparency="true" frameborder="0" scrolling="no"/>';var c=b.firstChild.cloneNode(!1);c.src=m.url,c.className=m.className||"";for(var d in m.css){c.style[d]=m.css[d]}c.title=m.title||"";if(m.replace){var l=m.replace.parentNode;l.replaceChild(c,m.replace)}else{document.body.insertBefore(c,document.body.firstChild)}return c})});e("util/querystring",function(d){function c(j){var k={},r,s,t,u;if(j){r=j.split("&");for(u=0;t=r[u];u++){s=t.split("="),s.length==2&&(k[a(s[0])]=a(s[1]))}}return k}function b(n){var j=[];for(var k in n){n[k]!==null&&typeof n[k]!="undefined"&&j.push(l(k)+"="+l(n[k]))}return j.sort().join("&")}function a(j){return decodeURIComponent(j)}function l(j){return encodeURIComponent(j).replace(/\+/g,"%2B")}d({decode:c,encode:b,encodePart:l,decodePart:a})});e("util/nodeselect",function(b){var c=document,a="querySelectorAll" in c?function(k,d){return c.querySelectorAll(k+"."+d)}:"getElementsByClassName" in c?function(q,d){var n=c.getElementsByClassName(d),o,p=[];for(i=0;o=n[i];i++){o.tagName.toLowerCase()==q&&p.push(o)}return p}:function(r,s){var d=c.getElementsByTagName(r),o,p=new RegExp("(?:^|\\s+)"+s+"(?:\\s+|$)"),q=[];for(i=0;o=d[i];i++){p.test(o.className)&&q.push(o)}return q};b(a)});e("$vendor/domready/ready.js",function(a){!function(y){function k(){z=1;for(var n=0,m=A.length;n<m;n++){A[n]()}}var z=0,A=[],B,C,D=!1,b=y.createElement("a"),c="DOMContentLoaded",d="addEventListener",j="onreadystatechange";/^loade|c/.test(y.readyState)&&(z=1),y[d]&&y[d](c,C=function(){y.removeEventListener(c,C,D),k()},D),b.doScroll&&y.attachEvent(j,B=function(){/^c/.test(y.readyState)&&(y.detachEvent(j,B),k())});var l=b.doScroll?function(m){self!=top?z?m():A.push(m):!function(){try{b.doScroll("left")}catch(n){return setTimeout(function(){l(m)},50)}m()}()}:function(m){z?m():A.push(m)};typeof module!="undefined"&&module.exports?module.exports={domReady:l}:window.domReady=l}(document);a();f.Script.loaded.push("$vendor/domready/ready.js")});e("util/domready",function(a){h("$vendor/domready/ready.js",function(){a(domReady)})});e("util/util",function(c){function b(p,q){for(var n=0,o;o=p[n];n++){if(q==o){return n}}return -1}function a(k){return d([],k)}function d(p){for(var q=1,n;n=arguments[q];q++){for(var o in n){p[o]=n[o]}}return p}c({aug:d,array:a,indexOf:b})});e("tfw/widget/base",function(a){h("util/util","util/domready","util/nodeselect","util/querystring","util/iframe",function(c,j,l,m,n){function k(p){return p&&F.byId[p]?F.byId[p].element:null}function d(){H(),j(function(){H()})}function b(p){E=p}function H(){var s=E.widgets,t,u;for(var p in s){p.match(/\./)?t=l.apply(this,p.split(".")):t=document.getElementsByTagName(p);for(var q=0,r;r=t[q];q++){u=new s[p](r),F.list.push(u),F.byId[u.id]=u,u.render(E)}}}var o=0,D,E,F={list:[],byId:{}},G=function(){};c.aug(G.prototype,{_:function(p){var q=this.lang;if(!q||!this.langs.hasOwnProperty(q)){q="en"}return this.langs[q][p]},add:function(p){F.list.push(this),F.byId[this.id]=p},create:function(r,s,p,q){this.id=this.generateId();return n({url:r,css:{width:p[0]+(typeof p[0]!="string"?"px":""),height:p[1]+(typeof p[1]!="string"?"px":"")},className:s,id:this.id,title:q,replace:this.originElement})},params:function(){var p=this.originElement.href&&this.originElement.href.split("?")[1],q=p?m.decode(p):{};return q},generateId:function(){return this.originElement.id?this.originElement.id:"twitter_tweet_button_"+o++}}),a({Base:G,init:b,embed:d,find:k,TWITTER_PROFILE_URL:/^https?\:\/\/(?:www\.)?twitter\.com\/(?:#!?\/)?([a-zA-Z0-9_]{1,20})\/?$/})})});e("util/events",function(a){h("util/util",function(d){function c(){this.completed=!1,this.callbacks=[]}var b={bind:function(l,m){this._handlers=this._handlers||{},this._handlers[l]=this._handlers[l]||[];return this._handlers[l].push(m)},unbind:function(o,m){if(!!this._handlers[o]){if(m){var n=d.indexOf(this._handlers[o],m);n>=0&&this._handlers[o].splice(n,1)}else{this._handlers[o]=[]}}},trigger:function(q,r){var s=this._handlers&&this._handlers[q];r.type=q;if(s){for(var o=0,p;p=s[o];o++){p.call(this,r)}}}};c.prototype.addCallback=function(k){this.completed?k.apply(this,this.results):this.callbacks.push(k)},c.prototype.complete=function(){this.results=makeArray(arguments),this.completed=!0;for(var l=0,m;m=this.callbacks[l];l++){m.apply(this,this.results)}},a({Emitter:b,Promise:c})})});e("util/uri",function(a){h("util/querystring","util/util",function(n,b){function m(){var z=document.getElementsByTagName("a"),A=document.getElementsByTagName("link"),B=/\bme\b/,C=/^https?\:\/\/(www\.)?twitter.com\/([a-zA-Z0-9_]+)$/,j=b.array(z).concat(b.array(A)),k,l,w;for(var x=0,y;y=j[x];x++){l=y.getAttribute("rel"),w=y.getAttribute("href");if(l&&w&&l.match(B)&&(k=w.match(C))){return k[2]}}}function d(){var j=document.getElementsByTagName("link");for(var k=0,l;l=j[k];k++){if(l.getAttribute("rel")=="canonical"){return c(l.getAttribute("href"))}}return null}function c(j){var k;if(j.match(/^https?:\/\//)){return j}k=location.host,location.port.length>0&&(k+=":"+location.port);return[location.protocol,"//",k,j].join("")}a({absolutize:c,getCanonicalURL:d,getScreenNameFromPage:m})})});e("tfw/widget/intent",function(a){h("util/util","tfw/widget/base","util/querystring","util/uri",function(n,p,J,K){function L(v){v=v||window.event;var w=v.target||v.srcElement,s,t;while(w&&w.nodeName.toLowerCase()!=="a"){w=w.parentNode}if(w&&w.nodeName.toLowerCase()==="a"&&w.href){s=w.href.match(N);if(s){var u=q(w.href);u=u.replace(/^http[:]/,"https:"),u=u.replace(/^\/\//,"https://"),twttr.events.hub?(t=new r(l.generateId(),w),l.add(t),o(u,w),twttr.events.trigger("click",{target:w,region:"intent",type:"click",data:{}})):m(u),v.returnValue=!1,v.preventDefault&&v.preventDefault()}}}function q(s){var t="original_referer="+location.href;return[s,t].join(s.indexOf("?")==-1?"?":"&")}function o(s,t){h("xd/parent","xd/jsonrpc",function(u,v){var w=u.connect({window:{width:550,height:450},src:s});v(w).expose({trigger:function(y,x){twttr.events.trigger(y,{target:t,region:"intent",type:y,data:x})}})})}function m(t){var u=Math.round(k/2-c/2),s=0;j>d&&(s=Math.round(j/2-d/2)),window.open(t,"intent",b+",width="+c+",height="+d+",left="+u+",top="+s)}var N=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,b="scrollbars=yes,resizable=yes,toolbar=no,location=yes",c=550,d=520,j=screen.height,k=screen.width,l,r=function(s,t){this.id=s,this.element=this.originElement=t},M=function(s){this.originElement=[],this.element=s};M.prototype=new p.Base,n.aug(M.prototype,{render:function(s){l=this,window.__twitterIntentHandler||(document.addEventListener?document.addEventListener("click",L,!1):document.attachEvent&&document.attachEvent("onclick",L),window.__twitterIntentHandler=!0)}}),a({Listener:M})})});e("tfw/widget/tweet",function(a){h("util/util","tfw/widget/base","util/querystring","util/uri",function(r,s,t,u){var v=document.title,b=encodeURI(location.href),c={en:1,de:1,es:1,fr:1,id:1,it:1,ko:1,ja:1,nl:1,pt:1,ru:1,tr:1},d=function(l){this.originElement=l,this.id=this.generateId();var m=this.params(),k=m.count||l.getAttribute("data-count"),j=m.lang||l.getAttribute("data-lang");this.text=m.text||l.getAttribute("data-text")||v,this.via=m.via||l.getAttribute("data-via")||u.getScreenNameFromPage(),this.url=m.url||l.getAttribute("data-url")||u.getCanonicalURL()||b,this.related=m.related||l.getAttribute("data-related"),this.counturl=m.counturl||l.getAttribute("data-counturl"),this.searchlink=m.searchlink||l.getAttribute("data-searchlink"),this.placeid=m.placeid||l.getAttribute("data-placeid"),this.supportCount[k]||(k="horizontal"),this.count=k,c[j]||(j="en"),this.lang=j};d.prototype=new s.Base,r.aug(d.prototype,{supportCount:{vertical:1,horizontal:1,none:1},titles:{en:"Twitter For Websites: Tweet Button",de:"Twitter für Webseiten: Tweet-Schaltfläche",es:"Twi`tter para sitios web: Botón para Twittear",fr:'Twitter pour votre site web : bouton "Tweeter"',id:"Twitter untuk Situs Web: Tombol Tweet",it:"Tweeter per i siti web: Bottone Tweet",ja:"WEBサイト向けTwitter: ツイートボタン",ko:"Twitter 웹버전: 트윗 버튼",nl:"Twitter voor websites: tweetknop",pt:"Twitter para websites: Botão de Tweet",ru:"Твиттер для веб-сайта: кнопка «Твитнуть»",tr:"Web siteleri için Twitter: Tweetle Butonu"},dimensionsMap:{en:{vertical:[55,62],horizontal:[110,20],none:[55,20]},de:{vertical:[67,62],horizontal:[122,20],none:[67,20]},es:{vertical:[64,62],horizontal:[118,20],none:[64,20]},fr:{vertical:[65,62],horizontal:[118,20],none:[65,20]},id:{vertical:[55,62],horizontal:[110,20],none:[55,20]},it:{vertical:[55,62],horizontal:[110,20],none:[55,20]},ko:{vertical:[55,62],horizontal:[110,20],none:[55,20]},ja:{vertical:[80,62],horizontal:[130,20],none:[80,20]},nl:{vertical:[55,62],horizontal:[110,20],none:[55,20]},pt:{vertical:[66,62],horizontal:[120,20],none:[66,20]},ru:{vertical:[68,62],horizontal:[120,20],none:[68,20]},tr:{vertical:[66,62],horizontal:[120,20],none:[66,20]}},parameters:function(){var j={text:this.text,url:this.url,via:this.via,related:this.related,count:this.count,lang:this.lang,counturl:this.counturl,searchlink:this.searchlink,placeid:this.placeid,original_referer:location.href,id:this.id};j._=(new Date).getTime();return t.encode(j)},render:function(l){var m=l.assetUrl()+"/widgets/tweet_button.html#"+this.parameters(),k=this.dimensionsMap[this.lang][this.count],j=this.titles[this.lang];this.element=this.create(m,"twitter-share-button twitter-count-"+this.count,k,j)}}),a({Embeddable:d})})});e("tfw/widget/follow",function(a){h("util/util","tfw/widget/base","util/querystring","util/uri",function(p,q,b,c){var d={en:1,de:1,es:1,fr:1,id:1,it:1,ko:1,ja:1,nl:1,pt:1,ru:1,tr:1},o=function(j){this.originElement=j,this.id=this.generateId();var k=this.params(),l=k.lang||j.getAttribute("data-lang")||"en";this.showScreenName=k.show_screen_name||j.getAttribute("data-show-screen-name")||"",this.showCount=k.show_count||j.getAttribute("data-show-count")||"",this.button=k.button||j.getAttribute("data-button")||"blue",this.linkColor=k.link_color||j.getAttribute("data-link-color")||"",this.textColor=k.text_color||j.getAttribute("data-text-color")||"",this.width=k.width||j.getAttribute("data-width")||"",this.screenName=this.screenNameFromHref(),this.align=k.align||j.getAttribute("data-align")||"",this.lang=l,d[l]||(this.lang="en")};o.prototype=new q.Base,p.aug(o.prototype,{titles:{en:"Twitter For Websites: Tweet Button",de:"Twitter für Webseiten: Tweet-Folgen",es:"Twi`tter para sitios web: Botón para Seguir",fr:'Twitter pour votre site web : bouton "Suivre"',id:"",it:"Tweeter per i siti web: Bottone Seguire",ja:"WEBサイト向けTwitter",ko:"Twitter 웹버전",pt:"Twitter para websites",ru:"Твиттер для веб-сайта",tr:"Web siteleri için Twitter"},langs:{en:{dimensions:[300,20]},de:{dimensions:[300,20]},es:{dimensions:[300,20]},fr:{dimensions:[300,20]},id:{dimensions:[300,20]},it:{dimensions:[300,20]},ko:{dimensions:[300,20]},nl:{dimensions:[300,20]},pt:{dimensions:[300,20]},ja:{dimensions:[300,20]},ru:{dimensions:[300,20]},tr:{dimensions:[300,20]}},parameters:function(){var j={screen_name:this.screenName,lang:this.lang,button:this.button,link_color:this.linkColor,text_color:this.textColor,show_count:this.showCount,show_screen_name:this.showScreenName,align:this.align,id:this.id};j._=(new Date).getTime();return b.encode(j)},screenNameFromHref:function(){var j=this.originElement.href,k;if(k=j.match(q.TWITTER_PROFILE_URL)){return k[1]}},render:function(j){if(!!this.screenName){var k=j.assetUrl()+"/widgets/follow_button.html#"+this.parameters(),l=this.langs[this.lang].dimensions;this.width&&(l=[this.width,l[1]]);var m=this.langs[this.lang].title;this.element=this.create(k,"twitter-follow-button",l,m)}}}),a({Embeddable:o})})});window.twttr=window.twttr||{},function(){twttr.host=twttr.host||"platform.twitter.com",h.path.length==0&&(h.path="//"+twttr.host+"/js"),typeof twttr.ignoreSSL=="undefined"&&(twttr.ignoreSSL=!1);var a=[];twttr.events={bind:function(c,b){return a.push([c,b])}},h("util/util","tfw/widget/follow","tfw/widget/tweet","tfw/widget/intent","util/events","tfw/widget/base",function(x,y,z,A,B,b){function k(){h("xd/parent","xd/jsonrpc",function(n,o){var m=c.assetUrl()+"/widgets/hub.html";twttr.events.hub=n.connect({src:m,iframe:{name:"twttrHubFrame",style:"position:absolute;top:-9999em;width:10px;height:10px"}}),o(twttr.events.hub).expose({trigger:function(r,s,p){var s=s||{},q=s.region;delete s.region,twttr.events.trigger(r,{target:b.find(p),data:s,region:q,type:r})}})})}function j(m){return(window.location.protocol.match(/s\:$/)||m)&&!twttr.ignoreSSL?"https":"http"}var c={},d=0;c.widgets={"a.twitter-share-button":z.Embeddable,"a.twitter-follow-button":y.Embeddable,body:A.Listener},c.assetUrl=function(m){return j(m)+"://"+twttr.host},twttr.events=x.aug({},B.Emitter),twttr.events.oldbind=twttr.events.bind,twttr.events.bind=function(m,n){k(),this.bind=this.oldbind,this.bind(m,n)};for(var l=0;handler=a[l];l++){twttr.events.bind(handler[0],handler[1])}twttr.widgets={load:function(){b.init(c),b.embed()}},twttr.widgets.load()})}()});var Hatena=Hatena||{};(function(Hatena){var B=Hatena.Bookmark=Hatena.Bookmark||{};if(B.BookmarkButton){return}B.origin="http://b.hatena.ne.jp";B.apiOrigin="http://cdn.api.b.hatena.ne.jp";B.staticOrigin="http://b.st-hatena.com";var isLocal=/\.hatena\.ne\.jp:3000$/.test(location.host);if(isLocal){B.origin=B.apiOrigin=B.staticOrigin="http://local.hatena.ne.jp:3000"}var U=B.ButtonUtils={};var extend=U.extend=function(dest,src){for(var i in src){dest[i]=src[i]}return dest};var E=U.createElement=function(name,props){var element=document.createElement(name);for(var p in props){element[p]=props[p]}for(var i=2;i<arguments.length;i++){var child=arguments[i];if(!child.nodeType){child=document.createTextNode(child)}element.appendChild(child)}return element};var getLocation=U.getLocation=function(){var url=location.href;if(url.length<document.URL.length){url=document.URL}return url};var View=U.View={root:null,clientLeft:0,clientTop:0,init:function(){this.root=((document.compatMode||"")==="CSS1Compat")?document.documentElement:document.body;this.clientLeft=this.root.clientLeft||0;this.clientTop=this.root.clientTop||0},getElementRect:function(element){if(!this.root){this.init()}this.getElementRect=element.getBoundingClientRect?this.getElementRectByRect:this.getElementRectByOffset;return this.getElementRect(element)},getElementRectByRect:function(element){var rect=element.getBoundingClientRect();var scroll=this.getScroll();return{x:rect.left+scroll.x-this.clientLeft,y:rect.top+scroll.y-this.clientTop,width:rect.width||rect.right-rect.left,height:rect.height||rect.bottom-rect.top}},getElementRectByOffset:function(element){var x=0,y=0;for(var node=element,base;base=node.offsetParent;node=base){x+=node.offsetLeft;y+=node.offsetTop}return{x:x,y:y,width:element.offsetWidth,height:element.offsetHeight}},getWindowSize:function(){if(!this.root){this.init()}return{width:this.root.clientWidth,height:this.root.clientHeight}},getDocumentSize:function(){if(!this.root){this.init()}return{width:this.root.scrollWidth,height:this.root.scrollHeight}},getScroll:function(){if(!this.root){this.init()}this.getScroll=(typeof window.pageXOffset==="number")?this.getScrollByPage:this.getScrollByRoot;return this.getScroll()},getScrollByPage:function(){return{x:window.pageXOffset,y:window.pageYOffset}},getScrollByRoot:function(){return{x:this.root.scrollLeft,y:this.root.scrollTop}}};var Dispatchable=U.Dispatchable={addEventListener:function(type,listener){var listeners=this.getListeners(type);for(var i=0;i<listeners.length;i++){if(listeners[i]===listener){return}}listeners.push(listener)},removeEventListener:function(type,listener){var listeners=this.getListeners(type);for(var i=0;i<listeners.length;i++){if(listeners[i]===listener){listeners.splice(i,1);return}}},dispatchEvent:function(type,data){var event=new Dispatchable.Event(type,data);var listeners=this.getListeners(type);for(var i=0;i<listeners.length;i++){listeners[i].call(this,event)}return !event.defaultPrevented},getListeners:function(type){if(!this.hasOwnProperty("_listenersMap")){this._listenersMap={}}return this._listenersMap[type]||(this._listenersMap[type]=[])}};Dispatchable.Event=function(type,data){this.type=type;this.data=data;this.defaultPrevented=false};extend(Dispatchable.Event.prototype,{preventDefault:function(){this.defaultPrevented=true}});var Observer=U.Observer=function(target,type,handler,method){this.target=target;this.type=type;this.listener=handler;if(method){this.listener=(typeof method==="string")?function(){return handler[method].apply(handler,arguments)}:function(){return handler.apply(method,arguments)}}if(!target.addEventListener&&target.attachEvent){var listener=this.listener;this.listener=function(event){return listener.call(target,Observer.WrappedEvent.create(event))};this.start=this.startAttach;this.stop=this.stopAttach}this.start()};extend(Observer.prototype,{start:function(){this.target.addEventListener(this.type,this.listener,false)},stop:function(){this.target.removeEventListener(this.type,this.listener,false)},startAttach:function(){this.target.attachEvent("on"+this.type,this.listener)},stopAttach:function(){this.target.detachEvent("on"+this.type,this.listener)}});Observer.WrappedEvent={create:function(event){var e=document.createEventObject(event);e._event=event;e.target=event.srcElement;var scroll=View.getScroll();e.pageX=event.clientX+scroll.x-View.clientLeft;e.pageY=event.clientY+scroll.y-View.clientTop;e.stopPropagation=this.stopPropagation;e.preventDefault=this.preventDefault;return e},stopPropagation:function(){this._event.cancelBubble=true},preventDefault:function(){this._event.returnValue=false}};var JSON=U.JSON=window.JSON||{_tokenRE:/[{}\[\],:]|-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b|\"(?:[^\u0000-\u001f\"\\]|\\(?:[\"\\\/bfnrt]|u[0-9A-Fa-f]{4}))*\"|\b(?:true|false|null)\b|\s+/g,_escapeChar:function(c){return"\\u"+(65536+c.charCodeAt(0)).toString(16).substring(1)},parse:function(json){json=String(json);if(json.replace(JSON._tokenRE,"")!==""){throw new Error("Invalid JSON sytax")}return eval("("+json+")")},stringify:function(value){switch(typeof value){case"string":return'"'+value.replace(/[\u0000-\u001f\"\\\u2028\u2029]/g,JSON._escapeChar)+'"';case"number":case"boolean":return""+value;case"object":if(!value){return"null"}var stringify=arguments.callee;var type=Object.prototype.toString.call(value).slice(8,-1);switch(type){case"String":case"Number":case"Boolean":return stringify(value.valueOf());case"Array":var members=[];for(var i=0;i<value.length;i++){members.push(stringify(value))}return"["+members.join(",")+"]";case"Object":var members=[];for(var i in value){if(value.hasOwnProperty(i)){members.push(stringify(i)+":"+stringify(value[i]))}}return"{"+members.join(",")+"}"}return"null"}return"null"}};var WindowMessenger=U.WindowMessenger=function(win,url){this.win=win;this.origin=url.replace(/^(https?:\/\/[^\/?#]+)[\s\S]*/,"$1");this.observer=new Observer(window,"message",this,"messageHandler")};extend(WindowMessenger,{keySeed:(Math.random()*65536)<<8,createForFrame:function(frame,url){var win=frame.contentWindow;win.name=(++this.keySeed).toString(36)+"|"+getLocation();win.location.replace(url);return new this(win,url)}});extend(WindowMessenger.prototype,Dispatchable);extend(WindowMessenger.prototype,{send:function(type,data){if(typeof data==="undefined"){data=null}var message="HBMessage@"+JSON.stringify({type:type,data:data});this.win.postMessage(message,this.origin)},messageHandler:function(event){var origin=event.origin||event.uri.replace(/^(https?:\/\/[^\/?#]+)[\s\S]*/,"$1");if(origin!==this.origin||event.source!=this.win||!/^HBMessage@/.test(event.data)){return}var message=JSON.parse(event.data.substring(10));this.dispatchEvent(message.type,message.data)},destroy:function(){this.observer.stop()}});if(!window.postMessage){WindowMessenger=U.WindowMessenger=function(win,url,key){this.win=win;this.url=url.replace(/#[\s\S]*/,"");this.key=key;WindowMessenger.instances[this.key]=this;if(!WindowMessenger.timerId){WindowMessenger.init()}};extend(WindowMessenger,{instances:{},interval:20,timerId:0,createForFrame:function(frame,url){var win=frame.contentWindow;var key=this.makeFNVHash(url+"|"+Math.random()).toString(36);win.name=key+"|"+getLocation();win.location.replace(url);return new this(win,url,key)},makeFNVHash:function(string){var hash=2166136261;for(var i=0;i<string.length;i++){hash=((hash*16777619)^string.charCodeAt(i))>>>0}return hash},init:function(){this.lastFragment=location.hash;var WM=this;this.timerId=window.setInterval(function(){WM.observe()},this.interval)},observe:function(){var fragment=location.hash;if(fragment===this.lastFragment){return}var match=fragment.match(/^#HBMessage-(\w+)-([^\/]+)\/(.+)/);if(!match){this.lastFragment=fragment;return}this.lastFragment=this.lastFragment||"#_";var scroll=View.getScroll();location.replace(this.lastFragment);window.scrollTo(scroll.x,scroll.y);var messenger=this.instances[match[1]];if(!messenger){return}var type=decodeURIComponent(match[2]);var data=JSON.parse(decodeURIComponent(match[3]));messenger.dispatchEvent(type,data)}});extend(WindowMessenger.prototype,Dispatchable);extend(WindowMessenger.prototype,{send:function(type,data){if(typeof data==="undefined"){data=null}var url=this.url+"#HBMessage-"+this.key+"-"+encodeURIComponent(type)+"/"+encodeURIComponent(JSON.stringify(data));try{this.win.location.replace(url)}catch(ex){this.win.location.href=url}},destroy:function(){delete WindowMessenger.instances[this.key]}})}B.BookmarkButton=function(link){this.url=link.getAttribute("data-hatena-bookmark-url")||B.BookmarkButton.extractURL(link.href)||B.BookmarkButton.getCurrentURL();this.link=link;this.mode=B.BookmarkButton.isTouchBrowser?"goto-touch":this.link.getAttribute("data-hatena-bookmark-mode");this.setup()};extend(B.BookmarkButton,{interval:428,timerId:0,setup:function(){if(this.timerId){return}var Button=this;this.timerId=window.setInterval(function(){Button.tryCreate()},this.interval);this.tryCreate()},lastLinkCount:0,tryCreate:function(){var links=document.getElementsByTagName("a");var linkCount=links.length;if(linkCount===this.lastLinkCount){return}var buttonLinks=[];var classRE=/(?:^|\s)hatena-bookmark-button(?:\s|$)/;for(var i=0;i<linkCount;i++){if(classRE.test(links[i].className)&&!links[i].getAttribute("data-hatena-bookmark-initialized")){buttonLinks.push(links[i])}}for(var i=0;i<buttonLinks.length;i++){new B.BookmarkButton(buttonLinks[i])}this.lastLinkCount=links.length},extractURL:function(entryURL){if(!entryURL){return null}var match=entryURL.match(/^http:\/\/b\.hatena\.ne\.jp\/entry\/(?:add\/)?(.+)/);if(!match){return null}var url=match[1];var parts=url.match(/^(?:https?(?:(:)|(%3A))|(s\/))?/);if(parts[2]){try{return decodeURIComponent(url)}catch(ex){return unescape(url)}}if(!parts[1]){url=parts[3]?"https://"+url.substring(2):"http://"+url}return url.replace(/%23/g,"#")},getCurrentURL:function(){var url=getLocation();var canonicalURL=this.getCanonicalURL();if(canonicalURL){var index=url.indexOf("#");if(index>=0&&canonicalURL.indexOf("#")<0){canonicalURL+=url.substring(index)}url=canonicalURL}return url},getCanonicalURL:function(){var links=document.getElementsByTagName("link");for(var i=0;i<links.length;i++){if(links[i].rel.toLowerCase()!=="canonical"||!links[i].href){continue}var a=document.createElement("a");a.href=links[i].href;return a.cloneNode(false).href}return null},isTouchBrowser:/\b(?:iPhone|iPod);| Android /.test(navigator.userAgent),forcedLayout:""});extend(B.BookmarkButton.prototype,{setup:function(){var layout=B.BookmarkButton.forcedLayout||this.link.getAttribute("data-hatena-bookmark-layout");if(layout==="simple"){this.link.setAttribute("data-hatena-bookmark-initialized","1");this.observer=new Observer(this.link,"click",this,"clickHandler");this.button=this.link;var images=this.link.getElementsByTagName("img");this.anchor=(images.length===1)?images[0]:this.link;this.image=new Image();this.image.src=B.apiOrigin+"/entry/button/?url="+encodeURIComponent(this.url)+"&layout=simple&format=image"}else{var width=50;var height=(layout==="vertical")?50:20;this.frame=E("iframe",{className:"hatena-bookmark-button-frame",title:this.link.title,frameBorder:0,scrolling:"no",allowTransparency:true,width:width,height:height});this.frame.style.cssText="width: "+width+"px; height: "+height+"px;";this.link.parentNode.replaceChild(this.frame,this.link);var buttonURL=B.apiOrigin+"/entry/button/?url="+encodeURIComponent(this.url);if(layout&&layout!=="standard"){buttonURL+="&layout="+encodeURIComponent(layout)}if(this.mode==="popup"){buttonURL+="&mode="+encodeURIComponent(this.mode)}this.messenger=WindowMessenger.createForFrame(this.frame,buttonURL);this.observer=new Observer(this.messenger,"click",this,"clickHandler");this.button=this.frame;this.anchor=this.frame}},getTitle:function(){var title=this.link.getAttribute("data-hatena-bookmark-title");if(!title){title=this.link.getAttribute("data-hatena-bookmark-escaped-title");if(title){try{title=decodeURIComponent(title)}catch(ex){}}}if(!title&&this.url.replace(/#.*/,"")===getLocation().replace(/#.*/,"")){title=document.title}return title},togglePanel:function(){if(!this.panel){this.panel=new B.BookmarkPanel(this.url,this.getTitle())}if(this.panel.isShown){this.panel.hide()}else{var position=this.link.getAttribute("data-hatena-bookmark-position");var hideBg=this.link.getAttribute("data-hatena-bookmark-hide-bg");var hideBackground=!hideBg||hideBg.toLowerCase()!=="false";this.panel.show(this.anchor,position,hideBackground)}},gotoTouchEntry:function(){var entryURL=B.origin+"/entry.touch/";var urlMatch=this.url.match(/^http(s)?:\/\/([\s\S]*)$/);if(urlMatch){entryURL+=(urlMatch[1]?"s/":"")+urlMatch[2]}else{entryURL+=this.url}location.href=entryURL.replace(/#/g,"%23")},gotoTouchBookmarklet:function(){var bookmarkletURL=B.origin+"/bookmarklet.touch?url="+encodeURIComponent(this.url);var title=this.getTitle();if(title){bookmarkletURL+="&btitle="+encodeURIComponent(title)}location.href=bookmarkletURL},clickHandler:function(event){if((event.which||event.button||0)>1){return}if(event.stopPropagation){event.stopPropagation()}if(event.preventDefault){event.preventDefault()}switch(this.mode){case"popup":B.BookmarkPanel.openPopup(this.url,this.getTitle());break;case"goto-touch":this.gotoTouchEntry();break;default:this.togglePanel()}},destroy:function(){if(this.observer){this.observer.stop()}if(this.messenger){this.messenger.destroy()}if(this.panel){this.panel.destroy()}if(this.button&&this.button.parentNode){this.button.parentNode.removeChild(this.button)}}});B.BookmarkPanel=function(url,title){this.url=url;this.title=title||"";this.isShown=false;this.width=365;this.height=160;this.fixedTo="top";this.hiddenFlashes=[];this.clickObserver=new Observer(document,"click",this,"clickHandler");this.clickObserver.stop();this.observers=[this.clickObserver];this.setup()};extend(B.BookmarkPanel,{currentPanel:null,makePanelURL:function(url,title){var panelURL=B.origin+"/entry/panel/?url="+encodeURIComponent(url);if(title){panelURL+="&btitle="+encodeURIComponent(title)}return panelURL},openPopup:function(url,title){var panelURL=this.makePanelURL(url,title);var win=window.open(panelURL,"hatena_bookmark_panel_popup","width=365,height=220,menubar=no,toolbar=no,resizable=yes")},hasCommonStyle:false,setupCommonStyle:function(){if(this.hasCommonStyle){return}this.hasCommonStyle=true;var resetCSSDeclarations="margin: 0; padding: 0; border: none; position: static; float: none; width: auto; height: auto; line-height: 1; vertical-align: baseline; color: #222; background: none; font-style: normal; font-weight:normal; font-size: medium; text-indent: 0; text-align: left; text-decoration: none; letter-spacing: normal; word-spacing: normal; white-space: normal;";var resetCSSText=".hatena-bookmark-bookmark-panel, .hatena-bookmark-bookmark-panel * {"+resetCSSDeclarations+"}";try{var style=document.createElement("style");style.type="text/css";style.appendChild(document.createTextNode(resetCSSText));document.getElementsByTagName("head")[0].appendChild(style)}catch(ex){document.createStyleSheet().cssText=resetCSSText}},needsRebase:null,getBasePosition:function(){if(this.needsRebase===null){var style=window.getComputedStyle?getComputedStyle(document.body,null):document.body.currentStyle;this.needsRebase=!!style&&style.position!=="static"}return this.needsRebase?View.getElementRect(document.body):{x:0,y:0}}});extend(B.BookmarkPanel.prototype,{setup:function(){var frameTitle=(this.title?"\u300E"+this.title+"\u300F":"\u3053\u306E\u30A8\u30F3\u30C8\u30EA\u30FC")+"\u3092\u306F\u3066\u306A\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF\u306B\u8FFD\u52A0";this.panel=E("div",{className:"hatena-bookmark-bookmark-panel"},this.loading=E("div",null,E("span",null,"Now Loading...")),this.content=E("div",null,this.frame=E("iframe",{title:frameTitle,scrolling:"no",frameBorder:0,allowTransparency:true})));this.setupStyle();document.body.appendChild(this.panel);var panelURL=B.BookmarkPanel.makePanelURL(this.url,this.title);this.messenger=WindowMessenger.createForFrame(this.frame,panelURL);this.observers.push(new Observer(this.frame,"load",this,"showContent"),new Observer(this.messenger,"ready",this,"showContent"),new Observer(this.messenger,"resize",this,"resizeMessageHandler"))},setupStyle:function(){B.BookmarkPanel.setupCommonStyle();var size="width: "+this.width+"px; height: "+this.height+"px;";this.panel.style.cssText="position: absolute; z-index: 10002; display: none; "+size;this.loading.style.cssText="background-color: #fff; border: 3px solid #2c6ebd; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; text-align: center; width: "+(this.width-6)+"px; height: "+(this.height-6)+"px;";this.loading.firstChild.style.cssText='background: url("'+B.staticOrigin+'/images/loading.gif") left center no-repeat; padding-left: 23px; font-size: 0.85em; position: relative; top: '+(this.height/2-10)+"px;";this.content.style.cssText="display: none;";this.frame.style.cssText="display: block; "+size},show:function(anchor,position,hideBackground){if(this.isShown){return}if(B.BookmarkPanel.currentPanel){B.BookmarkPanel.currentPanel.hide()}if(anchor){this.anchorTo(anchor,position)}this.panel.style.display="";this.isShown=true;this.clickObserver.start();if(hideBackground){this.hideFlashes()}B.BookmarkPanel.currentPanel=this;if(!this.loading){this.messenger.send("notifysize")}},hideFlashes:function(){var flashes=[];var embeds=document.getElementsByTagName("embed");for(var i=0,embed;embed=embeds[i];i++){if(embed.type==="application/x-shockwave-flash"){flashes.push(embed)}}var objects=document.getElementsByTagName("object");for(var i=0,object;object=objects[i];i++){if(object.type==="application/x-shockwave-flash"||(object.classid||"").toLowerCase()==="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"){flashes.push(object)}}if(!flashes.length){return}var panelRect=View.getElementRect(this.panel);var left=panelRect.x;var top=panelRect.y;var right=panelRect.x+panelRect.width;var bottom=panelRect.y+Math.max(panelRect.height,300);for(var i=0,flash;flash=flashes[i];i++){var rect=View.getElementRect(flash);if(rect.x+rect.width<left||right<rect.x||rect.y+rect.height<top||bottom<rect.y){continue}flash.style.visibility="hidden";this.hiddenFlashes.push(flash)}},showContent:function(){if(!this.loading){return}this.panel.removeChild(this.loading);this.loading=null;this.content.style.display=""},hide:function(){if(!this.isShown){return}this.panel.style.display="none";this.isShown=false;this.clickObserver.stop();for(var i=0,flash;flash=this.hiddenFlashes[i];i++){flash.style.visibility=""}this.hiddenFlashes=[];B.BookmarkPanel.currentPanel=null},resize:function(width,height){if(width>0){this.panel.style.width=width+"px";this.frame.style.width=width+"px";this.width=width}if(height>0){if(this.fixedTo==="bottom"){this.panel.style.top=parseFloat(this.panel.style.top)+this.height-height+"px"}this.panel.style.height=height+"px";this.frame.style.height=height+"px";this.height=height}},anchorTo:function(anchor,position){var rect=View.getElementRect(anchor);var isLeft=position&&position.indexOf("left")>=0;var isTop=position&&position.indexOf("top")>=0;if(!position){var size=View.getWindowSize();var scroll=View.getScroll();isLeft=(scroll.x+size.width)-rect.x<this.width&&(rect.x+rect.width)-scroll.x>=this.width;var h=Math.max(this.height,300);isTop=(scroll.y+size.height)-(rect.y+rect.height)<h&&rect.y-scroll.y>=h}var left=isLeft?rect.x+rect.width-this.width:rect.x;var top=isTop?rect.y-this.height-2:rect.y+rect.height+2;var base=B.BookmarkPanel.getBasePosition();this.panel.style.left=(Math.max(left,2)-base.x)+"px";this.panel.style.top=(Math.max(top,2)-base.y)+"px";this.fixedTo=isTop?"bottom":"top"},clickHandler:function(event){for(var node=event.target;node;node=node.parentNode){if(node===this.panel){return}}this.hide()},resizeMessageHandler:function(event){this.resize(event.data.width||-1,event.data.height||-1)},destroy:function(){this.hide();for(var i=0,observer;observer=this.observers[i];i++){observer.stop()}this.messenger.destroy();if(this.panel.parentNode){this.panel.parentNode.removeChild(this.panel)}}});(function(){var domains="www.toyokeizai.net member.toyokeizai.net excite.co.jp exblog.jp mainichi.jp jp.msn.com *.jp.msn.com itmedia.co.jp bizmakoto.jp atmarkit.co.jp eetimes.jp ednjapan.cancom-j.com ednjapan.com barks.jp www.asahi.com *.asahi.com jp.techcrunch.com japanese.engadget.com jp.autoblog.com celebrity.aol.jp www.nikkei.com *.nikkeibp.co.jp japan.cnet.com japan.zdnet.com builder.japan.zdnet.com japan.gamespot.com www.re-source.jp www.yomiuri.co.jp groupon.jp";var pattern="^(?:"+domains.replace(/\./g,"\\.").replace(/\*\\\./g,"(?:[^.]+\\.)+").replace(/\s+/g,"|")+")$";if(isLocal||!/^https?:$/.test(location.protocol)||new RegExp(pattern).test(location.hostname)){return}if(Math.random()>=1/3){return}window.mad_partner_id="6";var script=E("script",{type:"text/javascript",src:"//send.microad.jp/js/conv0000.js"});var anchor=document.getElementsByTagName("script")[0]||document.getElementsByTagName("head")[0].firstChild;anchor.parentNode.insertBefore(script,anchor)})()})(Hatena);Hatena.Bookmark.BookmarkButton.setup();